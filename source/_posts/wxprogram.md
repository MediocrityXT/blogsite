---
title: 微信小程序开发体验
date: 2020-07-30 16:40:03
categories: 编程
tags: 感悟
excerpt: "暑期实习参加的为期十天的微信小程序云开发训练营，接触到了很多我未曾踏足的领域"
---

![vlcsnap-2019-02-19-18h40m16s972](vlcsnap-2019-02-19-18h40m16s972.png)

![vlcsnap-2019-02-19-18h40m30s526](vlcsnap-2019-02-19-18h40m30s526.png)

十天时间说来不长，主要有如下收获

- GitHub版本管理使用
- js、json编写页面脚本
- html与css前端实现
- nodejs云函数与云数据库开发
- ~~箭头函数与回调~~

项目代码https://github.com/MediocrityXT/WXminiProgram

# 微信小程序开发

## 个人相册	`miniprogram-1`

### 基本功能

> 本地从相机拍摄或图库上传图片~~不知道为什么api的两个选择都是从图库上传没有区别~~，选择已有相册/新建相册存入，并可以查看各相册。

![上传后预览界面](image-20200730232143254.png "上传后预览界面")

<img src="image-20200730230947938.png" alt="相册界面"/>

这个部分实现比较简单，可以通过这个作业对微信小程序的结构有一个基本了解，并且接触到前后端的基本工作范围。~~前四天熬到3点把云上传和云查看功能做完然后发现其实这是后几天的工作QAQ~~

### 图像处理功能

> 可以对图片进行基础的处理（如水印、美颜等）

看完云开发guidebook我信心满满，挑明了sharp库随便用用就行，介不似送吗？

于是我开始了 ***长达两天的导库尝试*** 

> 什么叫做放弃希望啊？——战术后仰 

在sharp和jimp在本地小程序和云函数两侧反复尝试导入、构建、接着失败之后，我咨询到的某位同学表示：```我用的canvas加css滤镜做的，其它的不会```

**惊为天人！**

canvas???未曾设想的道路...

于是就变成了导入选定图片到画布然后加上text成为水印图

![图像处理页面](image-20200730234005493.png "图像处理界面")

（水印text为微信用户名，上面的图是本地原图，下面是画布效果）~~竟然画布里的画质比上面的还好~~

至于css滤镜...只能本地显示不能保存修改啊...何况css不支持随着js变量直接更改滤镜参数...所以...滤镜按钮现在是个摆设嘿嘿

## MusicMood	`miniprogram-3`



## 总结感想

网络API对于构造http请求中header的refers有限制，只能表明由微信小程序发出。

官方提供组件存在一些小问题，但是没有其他选择可以代替，否则只能从头写自定义组件。

云函数端只能引入node.js库；本地微信开发者工具也难以导入已经`npm install`的sharp/jimp等图像处理库，扩展性受限。

